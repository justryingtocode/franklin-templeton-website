<form [formGroup]="calcForm" *ngIf="calcForm">
    
    <!-- Earn Amount -->
    <div class="form-group" *ngIf="handleFieldVisibility('earn')">
        <label for="customRange4" class="form-label">I need
            <div class="selected-range">
                <span class="calc-input-prefix rupee-icon" >₹</span>
                <input 
                    name="earn"
                    type="number" 
                    (change)="onCalculatorChange($event, 'earn')"
                    [(ngModel)]="calcForm.value.earn" 
                    formControlName="earn" 
                    [attr.min]="getInputLimit(sliderKeyName.earn, false)" 
                    [attr.max]="getInputLimit(sliderKeyName.earn, true)"
                    class="calc-input amount text-start">
            </div>


        </label>
        <div class="range-slider">
                <input 
                    type="range" 
                    (change)="onCalculatorChange($event, 'earn')" 
                    [value]="calcForm.value.earn || getInputLimit(sliderKeyName.earn)" 
                    formControlName="earn" 
                    class="custom-range" 
                    [attr.min]="getInputLimit(sliderKeyName.earn, false)" 
                    [attr.max]="getInputLimit(sliderKeyName.earn, true)" 
                    [style.background]="earnSliderStyle">
        </div>
        <div class="d-flex text-small justify-content-between">
            <span>₹5L</span>
            <span>₹10Cr</span>
        </div>
    </div>

     <!-- Duration | Frequency -->
    <div class="form-group">
        <label for="customRange2" class="form-label"  *ngIf="handleFieldVisibility('amount')">
            <span>I want to invest</span>
           
            <div class="selected-range" (click)="autoFocus($event, 'amount')">
                <span class="calc-input-prefix">₹</span>
                <input 
                    type="number" 
                    [attr.min]="getInputLimit(sliderKeyName.amount, false)" 
                    [attr.max]="getInputLimit(sliderKeyName.amount, true)"
                    [(ngModel)]="calcForm.value.amount" 
                    formControlName="amount" 
                    (change)="onCalculatorChange($event, 'amount')" 
                    class="calc-input amount text-start"
                    id="amount">

            </div>
        </label>

        <!-- Duration | Frequency -->
        <div *ngIf="selectedSipType == 'amount'" class="amount-Frequency">
            <label for="customRange2" class="form-label"> Frequency </label>
        </div>
        <div class="invest-options" *ngIf="handleFieldVisibility('time')">
            <div class="form-check">
                <input 
                    formControlName="time" value="DAILY" class="form-check-input" type="radio" name="time" id="Daily"
                    (change)="onCalculatorChange($event, 'time')">
                <label class="form-check-label" for="Daily">
                    Daily
                </label>
            </div>
            <div class="form-check">
                <input formControlName="time" value="WEEKLY" class="form-check-input" type="radio" name="time"
                    id="Weekly"
                    (change)="onCalculatorChange($event, 'time')" checked>
                <label class="form-check-label" for="Weekly">
                    Weekly
                </label>
            </div>
            <div class="form-check">
                <input formControlName="time" value="MONTHLY" class="form-check-input" type="radio" name="time"
                    id="Monthly"
                    (change)="onCalculatorChange($event, 'time')">
                <label class="form-check-label" for="Monthly">
                    Monthly
                </label>
            </div>
            <div class="form-check">
                <input formControlName="time" value="QUARTERLY" class="form-check-input" type="radio" name="time"
                    id="Quarterly"
                    (change)="onCalculatorChange($event, 'time')">
                <label class="form-check-label" for="Quarterly">
                    Quarterly
                </label>
            </div>
        </div>
        
        <div class="range-slider" *ngIf="handleFieldVisibility('amount')">
            <input 
                type="range" 
                [attr.min]="getInputLimit(sliderKeyName.amount, false)" 
                [attr.max]="getInputLimit(sliderKeyName.amount, true)"
                [value]="calcForm.value.amount || getInputLimit(sliderKeyName.amount)" 
                formControlName="amount" 
                (change)="onCalculatorChange($event, 'amount')" 
                class="custom-range" 
                [style.background]="amountSliderStyle">

        </div>
        <div class="d-flex text-small justify-content-between"  *ngIf="handleFieldVisibility('amount')">
            <span>₹500</span>
            <span>₹10L</span>
        </div>
    </div>

    <!-- Period -->
    <div class="form-group" *ngIf="handleFieldVisibility('period')">
        <label for="customRange2" class="form-label">
            <!-- {{selectedSipType === 'normal' ? 'Over a' : 'For a'}} period of -->

            {{periodLable}}
            <div class="selected-range" (click)="autoFocus($event, 'period')">
                <input 
                    type="number" 
                    [attr.min]="getInputLimit(sliderKeyName.period, false)" 
                    [attr.max]="getInputLimit(sliderKeyName.period, true)"
                    formControlName="period" 
                    [(ngModel)]="calcForm.value.period" 
                    (change)="onCalculatorChange($event, 'period')" 
                    class="calc-input text-end forchangecustomcalculator"
                    id="period">

                <span class="calc-input-prefix">Years</span>
            </div>
        </label>
        <div class="range-slider">
            <input 
                type="range" 
                formControlName="period" 
                [value]="calcForm.value.period || getInputLimit(sliderKeyName.period)" 
                (change)="onCalculatorChange($event, 'period')" 
                class="custom-range" 
                [attr.min]="getInputLimit(sliderKeyName.period, false)" 
                [attr.max]="getInputLimit(sliderKeyName.period, true)"
                [style.background]="periodSliderStyle">
        </div>
        <div class="d-flex text-small justify-content-between">
            <span>1 year</span>
            <span>30 year</span>
        </div>
    </div>

    <!-- Returns -->
    <div class="form-group" *ngIf="handleFieldVisibility('expectedReturn')">
        <label for="customRange2" class="form-label">Expected rate of return
            <div class="selected-range" (click)="autoFocus($event, 'expectedReturn')">
                <input 
                    type="number" 
                    [attr.min]="getInputLimit(sliderKeyName.expectedReturn, false)" 
                    [attr.max]="getInputLimit(sliderKeyName.expectedReturn, true)"
                    formControlName="expectedReturn" 
                    [value]="calcForm.value.expectedReturn || getInputLimit(sliderKeyName.expectedReturn)" 
                    (change)="onCalculatorChange($event, 'expectedReturn')" 
                    class="calc-input text-end forchangecustomcalculator"
                    id="expectedReturn">
                
                <span class="calc-input-prefix"> %</span>
            </div>
        </label>
        <div class="range-slider">
            <input 
                #expectedReturnSlider 
                type="range" 
                formControlName="expectedReturn" 
                [value]="calcForm.value.expectedReturn || getInputLimit(sliderKeyName.expectedReturn)" 
                (change)="onCalculatorChange($event, 'expectedReturn')" 
                class="custom-range" 
                [attr.min]="getInputLimit(sliderKeyName.expectedReturn, false)" 
                [attr.max]="getInputLimit(sliderKeyName.expectedReturn, true)"
                [style.background]="expectedReturnSliderStyle"
                >

        </div>
        <div class="d-flex text-small justify-content-between">
            <span>{{getInputLimit(sliderKeyName.expectedReturn, false)}}%</span>
            <span>{{getInputLimit(sliderKeyName.expectedReturn, true)}}%</span>
        </div>
    </div>
</form>